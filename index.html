<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">



    <!-- SEO Meta Tags -->
    <meta name="description" content="Your description">
    <meta name="author" content="Your name">

    <!-- OG Meta Tags to improve the way the post looks when you share the page on Facebook, Twitter, LinkedIn -->
    <meta property="og:site_name" content="" /> <!-- website name -->
    <meta property="og:site" content="" /> <!-- website link -->
    <meta property="og:title" content="" /> <!-- title shown in the actual shared post -->
    <meta property="og:description" content="" /> <!-- description shown in the actual shared post -->
    <meta property="og:image" content="" /> <!-- image link, make sure it's jpg -->
    <meta property="og:url" content="" /> <!-- where do you want your post to link to -->
    <meta name="twitter:card" content="summary_large_image"> <!-- to have large image post format in Twitter -->

    <!-- Webpage Title -->
    <title>Ioniq Webpage Title</title>

    <!-- Styles -->
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,400;0,600;1,400&display=swap"
        rel="stylesheet">
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="css/fontawesome-all.min.css" rel="stylesheet">
    <link href="css/swiper.css" rel="stylesheet">
    <link href="css/styles.css" rel="stylesheet">
    <style>
        ::-webkit-input-placeholder {
            color: #b5b5b5 !important;
            text-align: center;
        }
    </style>

    <!-- Favicon  -->
    <link rel="icon" href="images/favicon.png">
</head>

<body data-bs-spy="scroll" data-bs-target="#navbarExample">

    <!-- Navigation -->
    <nav id="navbarExample" class="navbar navbar-expand-lg fixed-top navbar-light" aria-label="Main navigation">
        <div class="container">

            <!-- Image Logo -->


            <!-- Text Logo - Use this if you don't have a graphic logo -->
            <!-- <a class="navbar-brand logo-text" href="index.html">Ioniq</a> -->

            <button class="navbar-toggler p-0 border-0" type="button" id="navbarSideCollapse"
                aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>

            <div class="navbar-collapse offcanvas-collapse" id="navbarsExampleDefault">
                <ul class="navbar-nav navbar-nav-scroll">
                    <li class="nav-item">
                        <a class="nav-link active" aria-current="page" href="#header">Home</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#features">Tentang</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#details">Sentimen Analisis</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="http://mryanafz.github.io/">Tentang Saya</a>
                    </li>
                </ul>
            </div> <!-- end of navbar-collapse -->
        </div> <!-- end of container -->
    </nav> <!-- end of navbar -->
    <!-- end of navigation -->


    <!-- Header -->
    <header id="header" class="header">
        <div class="container">
            <div class="row">
                <div class="col-lg-6 order-2 order-lg-1 mt-5 mt-lg-0">
                    <div class="text-container">
                        <h1 class="h1-large">Sentimen Analisis Vaksin Covid-19</h1>
                        <a class="btn-solid-lg mt-5" href="#features">Lebih lanjut</a>
                    </div> <!-- end of text-container -->
                </div> <!-- end of col -->
                <div class="col-lg-6 order-1 order-lg-2">
                    <div class="image-container">
                        <img class="img-fluid" src="images/header-illustration.svg" alt="alternative">
                    </div> <!-- end of image-container -->
                </div> <!-- end of col -->
            </div> <!-- end of row -->
        </div> <!-- end of container -->
    </header> <!-- end of header -->
    <!-- end of header -->


    <!-- Features -->
    <div id="features" class="cards-1">
        <div class="container">
            <div class="row">
                <div class="col-lg-12">
                    <h2 class="h2-heading">Tentang <span style="text-decoration: none;">Aplikasi</span></h2>
                </div> <!-- end of col -->
            </div> <!-- end of row -->
            <div class="row">
                <div class="col-lg-12">
                    <p class="mb-5">Sentimen analisis adalah penggunaan pemrosesan bahasa alami untuk
                        mengidentifikasi, mengekstrak, mengukur, dan
                        mempelajari keadaan afektif dan informasi subjektif secara sistematis.</p>

                    <!-- Card -->
                    <div class="card">
                        <div class="card-icon">
                            <span class="fas fa-laptop"></span>
                        </div>
                        <div class="card-body">
                            <h4 class="card-title">Prediksi</h4>
                            <p>Menggunakan pendekatan machine learning untuk melakukan sentimen analisis.</p>
                        </div>
                    </div>
                    <!-- end of card -->

                    <!-- Card -->
                    <div class="card">
                        <div class="card-icon green">
                            <span class="fas fa-database"></span>
                        </div>
                        <div class="card-body">
                            <h4 class="card-title">Dataset</h4>
                            <p>Menggunakan data tweet tentang vaksin Covid-19.</p>
                        </div>
                    </div>
                    <!-- end of card -->

                    <!-- Card -->
                    <div class="card">
                        <div class="card-icon blue">
                            <span class="fas fa-cogs"></span>
                        </div>
                        <div class="card-body">
                            <h4 class="card-title">Model</h4>
                            <p>Menggunakan algoritma klasifikasi Linear Regression untuk membangun model.</p>
                        </div>
                    </div>
                    <!-- end of card -->

                </div> <!-- end of col -->
            </div> <!-- end of row -->
        </div> <!-- end of container -->
    </div> <!-- end of cards-1 -->
    <!-- end of services -->


    <!-- Details 1 -->
    <div id="details" class="bg-gray py-5">
        <div class="container text-center pt-5">
            <h2 class="text-center mb-4">Sentimen <span style="color: #f25c05;">Analisis</span></h2>
            <form method="POST" id="myform" autocomplete="off" class="text-center">
                <div class="mb-3">
                    <textarea class="form-control" placeholder="Silahkan tulis/paste tweet disini"
                        id="floatingTextarea2" style="height: 200px; border-radius: 15px;" name="tweet"
                        id=tweet></textarea>
                    <div class="fw-bold d-none" id="alert-tweet" style="color: #f25c05;">Form masih kosong
                    </div>
                </div>
                <button type="submit" id="prediksi" class="btn-solid-lg mt-4">
                    <span class="spinner-border spinner-border-sm d-none" role="status" id="loading"
                        aria-hidden="true"></span>
                    Prediksi
                </button>
            </form>
            <div class="row justify-content-center my-5">
                <div class="col-md-6" id="hasilPrediksi">

                </div>
            </div>

            <!-- <div class="row justify-content-center mt-5">
                <h2 class="text-center">Sentimen Analisis</h2>
            </div> -->


        </div> <!-- end of container -->
    </div> <!-- end of basic-1 -->
    <!-- end of details 1 -->


    <!-- Details Modal -->
    <div id="staticBackdrop" class="modal fade" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="row">
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    <div class="col-lg-8">
                        <div class="image-container">
                            <img class="img-fluid" src="images/details-modal.jpg" alt="alternative">
                        </div> <!-- end of image-container -->
                    </div> <!-- end of col -->
                    <div class="col-lg-4">
                        <h3>Goals Setting</h3>
                        <hr>
                        <p>In gravida at nunc sodales pretium. Vivamus semper, odio vitae mattis auctor, elit elit
                            semper magna ac tum nico vela spider</p>
                        <h4>User Feedback</h4>
                        <p>Sapien vitae eros. Praesent ut erat a tellus posuere nisi more thico cursus pharetra finibus
                            posuere nisi. Vivamus feugiat</p>
                        <ul class="list-unstyled li-space-lg">
                            <li class="d-flex">
                                <i class="fas fa-chevron-right"></i>
                                <div class="flex-grow-1">Tincidunt sem vel brita bet mala</div>
                            </li>
                            <li class="d-flex">
                                <i class="fas fa-chevron-right"></i>
                                <div class="flex-grow-1">Sapien condimentum sacoz sil necr</div>
                            </li>
                            <li class="d-flex">
                                <i class="fas fa-chevron-right"></i>
                                <div class="flex-grow-1">Fusce interdum nec ravon fro urna</div>
                            </li>
                            <li class="d-flex">
                                <i class="fas fa-chevron-right"></i>
                                <div class="flex-grow-1">Integer pulvinar biolot bat tortor</div>
                            </li>
                            <li class="d-flex">
                                <i class="fas fa-chevron-right"></i>
                                <div class="flex-grow-1">Id ultricies fringilla fangor raq trinit</div>
                            </li>
                        </ul>
                        <a id="modalCtaBtn" class="btn-solid-reg" href="#your-link">Details</a>
                        <button type="button" class="btn-outline-reg" data-bs-dismiss="modal">Close</button>
                    </div> <!-- end of col -->
                </div> <!-- end of row -->
            </div> <!-- end of modal-content -->
        </div> <!-- end of modal-dialog -->
    </div> <!-- end of modal -->
    <!-- end of details modal -->



    <!-- Footer -->
    <div class="footer">
        <div class="container">
            <div class="row">
                <div class="col-lg-12 text-center">
                    <div class="footer-col third text-center">
                        <span class="fa-stack">
                            <a href="https://mryanafz.github.io/" target="_blank">
                                <i class="fas fa-circle fa-stack-2x"></i>
                                <i class="fab fa-github fa-stack-1x"></i>
                            </a>
                        </span>
                        <span class="fa-stack">
                            <a href="https://www.instagram.com/mryanafz/" target="_blank">
                                <i class="fas fa-circle fa-stack-2x"></i>
                                <i class="fab fa-instagram fa-stack-1x"></i>
                            </a>
                        </span>
                        <span class="fa-stack">
                            <a href="mailto:ryan.afrizal55@gmail.com" target="_blank">>
                                <i class="fas fa-circle fa-stack-2x"></i>
                                <i class="fas fa-envelope fa-stack-1x"></i>
                            </a>
                        </span>
                    </div> <!-- end of footer-col -->
                </div> <!-- end of col -->
            </div> <!-- end of row -->
        </div> <!-- end of container -->
    </div> <!-- end of footer -->
    <!-- end of footer -->

    <!-- Copyright -->
    <div class="copyright">
        <div class="container">
            <div class="row">
                <div class="col-lg-4">
                    <p class="p-small">Copyright © <a href="#your-link">2022</a></p>
                </div> <!-- end of col -->
                <div class="col-lg-4">
                    <p class="p-small">Apps By : Muhammad Ryan Afrizal</p>
                </div> <!-- end of col -->

                <div class="col-lg-4">
                    <p class="p-small">Distributed By<a href="https://themewagon.com/"> Themewagon</a></p>
                </div> <!-- end of col -->
            </div> <!-- enf of row -->
        </div> <!-- end of container -->
    </div> <!-- end of copyright -->
    <!-- end of copyright -->


    <!-- Back To Top Button -->
    <button onclick="topFunction()" id="myBtn">
        <img src="images/up-arrow.png" alt="alternative">
    </button>
    <!-- end of back to top button -->

    <!-- Scripts -->
    <script src="js/bootstrap.min.js"></script> <!-- Bootstrap framework -->
    <script src="https://code.jquery.com/jquery-3.6.0.js"
        integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk=" crossorigin="anonymous"></script>
    <script src="js/swiper.min.js"></script> <!-- Swiper for image and text sliders -->
    <script src="js/purecounter.min.js"></script> <!-- Purecounter counter for statistics numbers -->
    <script src="js/replaceme.min.js"></script> <!-- ReplaceMe for rotating text -->
    <script src="js/scripts.js"></script> <!-- Custom scripts -->
    <script>
        $('#prediksi').on('click', function (e) {
            e.preventDefault();
            $('#myform').submit();
            $('#loading').toggleClass('d-none');
            $('#hasilPrediksi').html('')
        });

        $('#myform').submit(function (e) {
            e.preventDefault();
            var data = new FormData(this);


            // Display the key/value formdata
            alrt = []
            nameInput = []
            for (var d of data.entries()) {
                if (d[1] == '') {
                    alrt.push(d[0])
                }
                // console.log(d[0] + ', ' + d[1]);
                nameInput.push(d[0])
            }

            //menyembunyikan alert
            nameInput.forEach(removeAlert);
            if (alrt.length != 0) { //jika ada input kosong
                alrt.forEach(renderAlert);
                $('#loading').toggleClass('d-none');
            }
            else {
                // console.log('tidak ada kosong')
                // console.log(data.get('sepalLength'))
                $.ajax({
                    // url: 'https://asmaapi.herokuapp.com/vaksin/',
                    url: 'http://localhost:5000/vaksin/',
                    type: 'POST',
                    dataType: 'JSON',
                    data: data,
                    cache: false,
                    contentType: false,
                    processData: false,
                    success: function (data) {
                        // predict = JSON.stringify(data)
                        // predicted = Object.values(data)
                        console.log(data)
                        // console.log(Object.values(data)[0])
                        // console.log(Object.values(data)[1][0].toFixed(2))
                        // console.log(Object.values(data)[1][1].toFixed(2))
                        // console.log(toPercent(Object.values(data)[1][0]))
                        // console.log(1.12234.toFixed(2))

                        renderPrediksi('Sentimen ' + Object.values(data)[0], Object.values(data)[1][0], Object.values(data)[1][1])
                        $('#loading').toggleClass('d-none');
                    },

                })

            }

        });

        function toPercent(num) {
            return (num * 100).toFixed(2)
        }

        function renderAlert(value, index, array) {
            $("#alert-" + value).removeClass('d-none')
            // console.log(value)
        }

        function removeAlert(value, index, array) {
            $("#alert-" + value).addClass('d-none')
            // console.log(value)
        }

        function renderPrediksi(prediksi, negatif, positif) {
            $("#hasilPrediksi").html(
                `
                <h2 class="text-center text-decoration-underline">`+ prediksi + `</h2>
                <h5 class="text-center h5">Probabilitas</h5>
                <h4 class="text-center h5 mb-4 fw-bold" style="color: #f25c05;">Positif : `+ toPercent(positif) + `% | Negatif : ` + toPercent(negatif) + `%</h4>
                `
            )
        }

    </script>
</body>

</html>